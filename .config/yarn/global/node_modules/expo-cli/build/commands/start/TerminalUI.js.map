{"version":3,"file":"TerminalUI.js","names":["CTRL_C","CTRL_D","CTRL_L","BLT","bold","b","italic","i","underline","u","chalk","printHelp","logCommandsTable","key","msg","div","dim","shouldOpenDevToolsOnStartupAsync","UserSettings","getAsync","printUsageAsync","projectRoot","options","dev","ProjectSettings","readAsync","openDevToolsAtStartup","devMode","currentToggle","isMac","process","platform","platforms","isAndroidDisabled","includes","isIosDisabled","isWebDisable","disabled","isRemoteReloadingEnabled","isWebSocketsEnabled","status","printBasicUsageAsync","ui","Log","nested","filter","Boolean","map","view","length","join","printServerInfo","wrapLength","stdout","columns","item","text","wrapAnsi","trimStart","webOnly","url","UrlUtils","constructDeepLinkAsync","getURLForQR","devClient","Env","isInterstitiaLPageEnabled","isDevClientPackageInstalled","constructLoadingUrlAsync","urlOpts","printQRCode","error","code","serverUrl","constructManifestUrlAsync","urlType","webUrl","Webpack","getUrlAsync","addNewLineIfNone","gray","openDeveloperTools","log","openBrowserAsync","warn","openJsInsectorAsync","packagerPort","readPackagerInfoAsync","metroServerOrigin","apps","queryAllInspectorAppsAsync","learnMore","app","openJsInspector","startAsync","stdin","startWaitingForCommand","setRawMode","resume","setEncoding","on","handleKeypress","stopWaitingForCommand","removeListener","Prompts","addInteractionListener","pause","UserManager","setInteractiveAuthenticationCallback","loginOrRegisterIfLoggedOutAsync","handleKeypressAsync","err","handleErrorsAsync","exit","shouldPrompt","nonInteractive","clear","isTargetingNative","results","Android","openWebProjectAsync","success","nestedError","isDisabled","nestedWarn","openProjectAsync","message","Simulator","emit","pauseInteractions","ensureWebSupportSetupAsync","push","e","isStarted","Project","openAsync","devToolsPort","enabled","setAsync","broadcastMessage","value","selectAsync","choices","title","name","resumeInteractions","projectSettings","minify","reset","openInEditorAsync","editor","env","EXPO_EDITOR"],"sources":["../../../src/commands/start/TerminalUI.ts"],"sourcesContent":["import { ExpoConfig } from '@expo/config-types';\nimport { openJsInspector, queryAllInspectorAppsAsync } from '@expo/dev-server';\nimport openBrowserAsync from 'better-opn';\nimport chalk from 'chalk';\nimport wrapAnsi from 'wrap-ansi';\nimport {\n  Android,\n  Env,\n  isDevClientPackageInstalled,\n  Project,\n  ProjectSettings,\n  Prompts,\n  Simulator,\n  UrlUtils,\n  UserManager,\n  UserSettings,\n  Webpack,\n} from 'xdl';\n\nimport Log from '../../log';\nimport { handleErrorsAsync } from '../../utils/handleErrors';\nimport { selectAsync } from '../../utils/prompts';\nimport { loginOrRegisterIfLoggedOutAsync } from '../auth/accounts';\nimport { learnMore } from '../utils/TerminalLink';\nimport { openInEditorAsync } from '../utils/openInEditorAsync';\nimport urlOpts from '../utils/urlOpts';\nimport { ensureWebSupportSetupAsync } from '../utils/web/ensureWebSetup';\n\nconst CTRL_C = '\\u0003';\nconst CTRL_D = '\\u0004';\nconst CTRL_L = '\\u000C';\n\nconst BLT = `\\u203A`;\nconst { bold: b, italic: i, underline: u } = chalk;\n\ntype StartOptions = {\n  isWebSocketsEnabled?: boolean;\n  isRemoteReloadingEnabled?: boolean;\n  devClient?: boolean;\n  reset?: boolean;\n  nonInteractive?: boolean;\n  nonPersistent?: boolean;\n  maxWorkers?: number;\n  webOnly?: boolean;\n  platforms?: ExpoConfig['platforms'];\n};\n\nconst printHelp = (): void => {\n  logCommandsTable([{ key: '?', msg: 'show all commands' }]);\n};\n\nconst div = chalk.dim(`â”‚`);\n\nexport async function shouldOpenDevToolsOnStartupAsync() {\n  return UserSettings.getAsync(\n    'openDevToolsAtStartup',\n    // Defaults to false for new users.\n    // We can swap this back to true when dev tools UI has a code owner again.\n    false\n  );\n}\n\nconst printUsageAsync = async (\n  projectRoot: string,\n  options: Pick<\n    StartOptions,\n    'webOnly' | 'devClient' | 'isWebSocketsEnabled' | 'isRemoteReloadingEnabled' | 'platforms'\n  >\n) => {\n  const { dev } = await ProjectSettings.readAsync(projectRoot);\n  const openDevToolsAtStartup = await shouldOpenDevToolsOnStartupAsync();\n  const devMode = dev ? 'development' : 'production';\n  const currentToggle = openDevToolsAtStartup ? 'enabled' : 'disabled';\n\n  const isMac = process.platform === 'darwin';\n\n  const { platforms = ['ios', 'android', 'web'] } = options;\n\n  const isAndroidDisabled = !platforms.includes('android');\n  const isIosDisabled = !platforms.includes('ios');\n  const isWebDisable = !platforms.includes('web');\n\n  logCommandsTable([\n    {},\n    { key: 'a', msg: `open Android`, disabled: isAndroidDisabled },\n    { key: 'shift+a', msg: `select a device or emulator`, disabled: isAndroidDisabled },\n    isMac && { key: 'i', msg: `open iOS simulator`, disabled: isIosDisabled },\n    isMac && { key: 'shift+i', msg: `select a simulator`, disabled: isIosDisabled },\n    { key: 'w', msg: `open web`, disabled: isWebDisable },\n    {},\n    !!options.isRemoteReloadingEnabled && { key: 'r', msg: `reload app` },\n    !!options.isWebSocketsEnabled && { key: 'm', msg: `toggle menu` },\n    !!options.isWebSocketsEnabled && { key: 'shift+m', msg: `more tools` },\n    !!options.isWebSocketsEnabled && { key: 'j', msg: `open JavaScript inspector for Hermes` },\n    { key: 'o', msg: `open project code in your editor` },\n    { key: 'c', msg: `show project QR` },\n    { key: 'p', msg: `toggle build mode`, status: devMode },\n    // TODO: Drop with SDK 40\n    !options.isRemoteReloadingEnabled && { key: 'r', msg: `restart bundler` },\n    !options.isRemoteReloadingEnabled && { key: 'shift+r', msg: `restart and clear cache` },\n    {},\n    { key: 'd', msg: `show developer tools` },\n    {\n      key: 'shift+d',\n      msg: `toggle auto opening developer tools on startup`,\n      status: currentToggle,\n    },\n    {},\n  ]);\n};\n\nconst printBasicUsageAsync = async (\n  options: Pick<\n    StartOptions,\n    'webOnly' | 'isWebSocketsEnabled' | 'isRemoteReloadingEnabled' | 'platforms'\n  >\n) => {\n  const isMac = process.platform === 'darwin';\n  const openDevToolsAtStartup = await shouldOpenDevToolsOnStartupAsync();\n  const currentToggle = openDevToolsAtStartup ? 'enabled' : 'disabled';\n\n  const { platforms = ['ios', 'android', 'web'] } = options;\n\n  const isAndroidDisabled = !platforms.includes('android');\n  const isIosDisabled = !platforms.includes('ios');\n  const isWebDisable = !platforms.includes('web');\n\n  logCommandsTable([\n    {},\n    { key: 'a', msg: `open Android`, disabled: isAndroidDisabled },\n    isMac && { key: 'i', msg: `open iOS simulator`, disabled: isIosDisabled },\n    { key: 'w', msg: `open web`, disabled: isWebDisable },\n    {},\n    !!options.isRemoteReloadingEnabled && { key: 'r', msg: `reload app` },\n    !!options.isWebSocketsEnabled && { key: 'm', msg: `toggle menu` },\n    { key: 'd', msg: `show developer tools` },\n    {\n      key: 'shift+d',\n      msg: `toggle auto opening developer tools on startup`,\n      status: currentToggle,\n    },\n    {},\n  ]);\n};\n\nfunction logCommandsTable(\n  ui: (false | { key?: string; msg?: string; status?: string; disabled?: boolean })[]\n) {\n  Log.nested(\n    ui\n      .filter(Boolean)\n      // @ts-ignore: filter doesn't work\n      .map(({ key, msg, status, disabled }) => {\n        if (!key) return '';\n        let view = `${BLT} `;\n        if (key.length === 1) view += 'Press ';\n        view += `${b(key)} ${div} `;\n        view += msg;\n        if (status) {\n          view += ` ${chalk.dim(`(${i(status)})`)}`;\n        }\n        if (disabled) {\n          view = chalk.dim(view);\n        }\n        return view;\n      })\n      .join('\\n')\n  );\n}\n\nconst printServerInfo = async (\n  projectRoot: string,\n  options: Pick<\n    StartOptions,\n    'webOnly' | 'isWebSocketsEnabled' | 'isRemoteReloadingEnabled' | 'platforms'\n  >\n) => {\n  const wrapLength = process.stdout.columns || 80;\n  const item = (text: string): string => `${BLT} ` + wrapAnsi(text, wrapLength).trimStart();\n\n  if (!options.webOnly) {\n    try {\n      const url = await UrlUtils.constructDeepLinkAsync(projectRoot);\n\n      const getURLForQR = async () => {\n        const { devClient } = await ProjectSettings.readAsync(projectRoot);\n        if (\n          Env.isInterstitiaLPageEnabled() &&\n          !devClient &&\n          (await isDevClientPackageInstalled(projectRoot))\n        ) {\n          return await UrlUtils.constructLoadingUrlAsync(projectRoot, null);\n        } else {\n          return url;\n        }\n      };\n\n      urlOpts.printQRCode(await getURLForQR());\n      Log.nested(item(`Metro waiting on ${u(url)}`));\n      // Log.newLine();\n      // TODO: if development build, change this message!\n      Log.nested(item(`Scan the QR code above with Expo Go (Android) or the Camera app (iOS)`));\n    } catch (error: any) {\n      // @ts-ignore: If there is no development build scheme, then skip the QR code.\n      if (error.code !== 'NO_DEV_CLIENT_SCHEME') {\n        throw error;\n      } else {\n        const serverUrl = await UrlUtils.constructManifestUrlAsync(projectRoot, {\n          urlType: 'http',\n        });\n        Log.nested(item(`Metro waiting on ${u(serverUrl)}`));\n        Log.nested(item(`Linking is disabled because the client scheme cannot be resolved.`));\n      }\n    }\n  }\n\n  const webUrl = await Webpack.getUrlAsync(projectRoot);\n  if (webUrl) {\n    Log.addNewLineIfNone();\n    Log.nested(item(`Webpack waiting on ${u(webUrl)}`));\n    Log.nested(chalk.gray(item(`Expo Webpack (web) is in beta, and subject to breaking changes!`)));\n  }\n\n  await printBasicUsageAsync(options);\n  printHelp();\n  Log.addNewLineIfNone();\n};\n\nexport async function openDeveloperTools(url: string) {\n  Log.log(`Opening developer tools in the browser...`);\n  if (!(await openBrowserAsync(url))) {\n    Log.warn(`Unable to open developer tools in the browser`);\n  }\n}\n\nasync function openJsInsectorAsync(projectRoot: string) {\n  Log.log(`Opening JavaScript inspector in the browser...`);\n  const { packagerPort } = await ProjectSettings.readPackagerInfoAsync(projectRoot);\n  const metroServerOrigin = `http://localhost:${packagerPort}`;\n  const apps = await queryAllInspectorAppsAsync(metroServerOrigin);\n  if (apps.length === 0) {\n    Log.warn(\n      `No compatible apps connected. This feature is only available for apps using the Hermes runtime. ${learnMore(\n        'https://docs.expo.dev/guides/using-hermes/'\n      )}`\n    );\n    return;\n  }\n  for (const app of apps) {\n    openJsInspector(app);\n  }\n}\n\nexport async function startAsync(projectRoot: string, options: StartOptions) {\n  const { stdin } = process;\n  const startWaitingForCommand = () => {\n    if (!stdin.setRawMode) {\n      Log.warn(\n        'Non-interactive terminal, keyboard commands are disabled. Please upgrade to Node 12+'\n      );\n      return;\n    }\n    stdin.setRawMode(true);\n    stdin.resume();\n    stdin.setEncoding('utf8');\n    stdin.on('data', handleKeypress);\n  };\n\n  const stopWaitingForCommand = () => {\n    stdin.removeListener('data', handleKeypress);\n    if (!stdin.setRawMode) {\n      Log.warn(\n        'Non-interactive terminal, keyboard commands are disabled. Please upgrade to Node 12+'\n      );\n      return;\n    }\n    stdin.setRawMode(false);\n    stdin.resume();\n  };\n\n  startWaitingForCommand();\n\n  Prompts.addInteractionListener(({ pause }) => {\n    if (pause) {\n      stopWaitingForCommand();\n    } else {\n      startWaitingForCommand();\n    }\n  });\n\n  UserManager.setInteractiveAuthenticationCallback(async () => {\n    stopWaitingForCommand();\n    try {\n      return await loginOrRegisterIfLoggedOutAsync();\n    } finally {\n      startWaitingForCommand();\n    }\n  });\n\n  await printServerInfo(projectRoot, options);\n\n  async function handleKeypress(key: string) {\n    try {\n      await handleKeypressAsync(key);\n    } catch (err: any) {\n      await handleErrorsAsync(err, {});\n      process.exit(1);\n    }\n  }\n\n  async function handleKeypressAsync(key: string) {\n    const shouldPrompt = !options.nonInteractive && ['I', 'A'].includes(key);\n    if (shouldPrompt) {\n      Log.clear();\n    }\n    const { platforms = ['ios', 'android', 'web'] } = options;\n\n    switch (key) {\n      case 'A':\n      case 'a':\n        if (options.webOnly && !Webpack.isTargetingNative()) {\n          Log.log(`${BLT} Opening the web project in Chrome on Android...`);\n          const results = await Android.openWebProjectAsync({\n            projectRoot,\n            shouldPrompt,\n          });\n          if (!results.success) {\n            Log.nestedError(results.error);\n          }\n        } else {\n          const isDisabled = !platforms.includes('android');\n          if (isDisabled) {\n            Log.nestedWarn(\n              `Android is disabled, enable it by adding ${chalk.bold`android`} to the platforms array in your app.json or app.config.js`\n            );\n            break;\n          }\n\n          Log.log(`${BLT} Opening on Android...`);\n          const results = await Android.openProjectAsync({\n            projectRoot,\n            shouldPrompt,\n            devClient: options.devClient ?? false,\n          });\n          if (!results.success && results.error !== 'escaped') {\n            Log.nestedError(\n              typeof results.error === 'string' ? results.error : results.error.message\n            );\n          }\n        }\n        printHelp();\n        break;\n      case 'I':\n      case 'i':\n        if (options.webOnly && !Webpack.isTargetingNative()) {\n          Log.log(`${BLT} Opening the web project in Safari on iOS...`);\n          const results = await Simulator.openWebProjectAsync({\n            projectRoot,\n            shouldPrompt,\n          });\n          if (!results.success) {\n            Log.nestedError(results.error);\n          }\n        } else {\n          const isDisabled = !platforms.includes('ios');\n          if (isDisabled) {\n            Log.nestedWarn(\n              `iOS is disabled, enable it by adding ${chalk.bold`ios`} to the platforms array in your app.json or app.config.js`\n            );\n            break;\n          }\n          Log.log(`${BLT} Opening on iOS...`);\n          const results = await Simulator.openProjectAsync({\n            projectRoot,\n            shouldPrompt,\n            devClient: options.devClient ?? false,\n          });\n          if (!results.success && results.error !== 'escaped') {\n            Log.nestedError(results.error);\n          }\n        }\n        printHelp();\n        break;\n    }\n\n    switch (key) {\n      case CTRL_C:\n      case CTRL_D: {\n        // @ts-ignore: Argument of type '\"SIGINT\"' is not assignable to parameter of type '\"disconnect\"'.\n        process.emit('SIGINT');\n        // Prevent terminal UI from accepting commands while the process is closing.\n        // Without this, fast typers will close the server then start typing their\n        // next command and have a bunch of unrelated things pop up.\n        Prompts.pauseInteractions();\n        break;\n      }\n      case CTRL_L: {\n        Log.clear();\n        break;\n      }\n      case '?': {\n        await printUsageAsync(projectRoot, options);\n        break;\n      }\n      case 'w': {\n        try {\n          if (await ensureWebSupportSetupAsync(projectRoot)) {\n            if (!platforms.includes('web')) {\n              platforms.push('web');\n              options.platforms?.push('web');\n            }\n          }\n        } catch (e: any) {\n          Log.nestedWarn(e.message);\n          break;\n        }\n\n        const isDisabled = !platforms.includes('web');\n        if (isDisabled) {\n          // Use warnings from the web support setup.\n          break;\n        }\n\n        // Ensure the Webpack dev server is running first\n        const isStarted = await Webpack.getUrlAsync(projectRoot);\n\n        if (!isStarted) {\n          await Project.startAsync(projectRoot, { webOnly: true });\n          // When this is the first time webpack is started, reprint the connection info.\n          await printServerInfo(projectRoot, options);\n        }\n\n        Log.log(`${BLT} Open in the web browser...`);\n        await Webpack.openAsync(projectRoot);\n        printHelp();\n        break;\n      }\n      case 'c': {\n        Log.clear();\n        await printServerInfo(projectRoot, options);\n        break;\n      }\n      case 'd': {\n        const { devToolsPort } = await ProjectSettings.readPackagerInfoAsync(projectRoot);\n        openDeveloperTools(`http://localhost:${devToolsPort}`);\n        printHelp();\n        break;\n      }\n      case 'D': {\n        const enabled = !(await shouldOpenDevToolsOnStartupAsync());\n        await UserSettings.setAsync('openDevToolsAtStartup', enabled);\n        const currentToggle = enabled ? 'enabled' : 'disabled';\n        Log.log(`Auto opening developer tools on startup: ${chalk.bold(currentToggle)}`);\n        logCommandsTable([{ key: 'd', msg: `show developer tools now` }]);\n        break;\n      }\n      case 'j': {\n        await openJsInsectorAsync(projectRoot);\n        break;\n      }\n      case 'm': {\n        if (options.isWebSocketsEnabled) {\n          Log.log(`${BLT} Toggling dev menu`);\n          Project.broadcastMessage('devMenu');\n          Webpack.broadcastMessage('devMenu');\n        }\n        break;\n      }\n      case 'M': {\n        if (options.isWebSocketsEnabled) {\n          Prompts.pauseInteractions();\n          try {\n            const value = await selectAsync({\n              // Options match: Chrome > View > Developer\n              message: `Dev tools ${chalk.dim`(native only)`}`,\n              choices: [\n                { title: 'Inspect elements', value: 'toggleElementInspector' },\n                { title: 'Toggle performance monitor', value: 'togglePerformanceMonitor' },\n                { title: 'Toggle developer menu', value: 'toggleDevMenu' },\n                { title: 'Reload app', value: 'reload' },\n                // TODO: Maybe a \"View Source\" option to open code.\n                // Toggling Remote JS Debugging is pretty rough, so leaving it disabled.\n                // { title: 'Toggle Remote Debugging', value: 'toggleRemoteDebugging' },\n              ],\n            });\n            Project.broadcastMessage('sendDevCommand', { name: value });\n            Webpack.broadcastMessage('sendDevCommand', { name: value });\n          } catch {\n            // do nothing\n          } finally {\n            Prompts.resumeInteractions();\n            printHelp();\n          }\n        }\n        break;\n      }\n      case 'p': {\n        Log.clear();\n        const projectSettings = await ProjectSettings.readAsync(projectRoot);\n        const dev = !projectSettings.dev;\n        await ProjectSettings.setAsync(projectRoot, { dev, minify: !dev });\n        Log.log(\n          `Metro bundler is now running in ${chalk.bold(\n            dev ? 'development' : 'production'\n          )}${chalk.reset(` mode.`)}\nPlease reload the project in Expo Go for the change to take effect.`\n        );\n        printHelp();\n        break;\n      }\n      case 'r':\n        if (options.isRemoteReloadingEnabled) {\n          Log.log(`${BLT} Reloading apps`);\n          // Send reload requests over the dev servers\n          Project.broadcastMessage('reload');\n\n          Webpack.broadcastMessage('reload');\n        } else if (!options.webOnly) {\n          // [SDK 40]: Restart bundler\n          Log.clear();\n          Project.startAsync(projectRoot, { ...options, reset: false });\n          Log.log('Restarting Metro bundler...');\n        }\n        break;\n      case 'R':\n        if (!options.isRemoteReloadingEnabled) {\n          // [SDK 40]: Restart bundler with cache\n          Log.clear();\n          Project.startAsync(projectRoot, { ...options, reset: true });\n          Log.log('Restarting Metro bundler and clearing cache...');\n        }\n        break;\n      case 'o':\n        Log.log(`${BLT} Opening the editor...`);\n        await openInEditorAsync(projectRoot, { editor: process.env.EXPO_EDITOR });\n    }\n  }\n}\n"],"mappings":"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"}